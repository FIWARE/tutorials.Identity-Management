{
	"info": {
		"_postman_id": "83b05e2a-e6d6-4869-a632-afcbb2072759",
		"name": "FIWARE Identity Management",
		"description": "TODO: Add a description",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"description": "",
			"item": [
				{
					"name": "Create token with Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"admin@test.com\",\n  \"password\": \"1234\"\n}"
						},
						"url": {
							"raw": "http://{{keyrock}}/v1/auth/tokens",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"auth",
								"tokens"
							]
						},
						"description": "In order to manage the Identity Manager through the API you must obtain an access token to be included in HTTP headers. There are two methods to obtain an access token."
					},
					"response": []
				},
				{
					"name": "Get token info",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Auth-token",
								"value": "{{X-Auth-token}}"
							},
							{
								"key": "X-Subject-token",
								"value": "{{X-Subject-token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{keyrock}}/v1/auth/tokens",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"auth",
								"tokens"
							]
						},
						"description": "In order to manage the Identity Manager through the API you must obtain an access token to be included in HTTP headers. There are two methods to obtain an access token."
					},
					"response": []
				},
				{
					"name": "Refresh token with Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"70bb37f8-938e-4158-a8ab-7218af3c384d\"\n}"
						},
						"url": {
							"raw": "http://{{keyrock}}/v1/auth/tokens",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"auth",
								"tokens"
							]
						},
						"description": "In order to manage the Identity Manager through the API you must obtain an access token to be included in HTTP headers. There are two methods to obtain an access token."
					},
					"response": []
				}
			]
		},
		{
			"name": "Managing User Accounts",
			"description": "",
			"item": [
				{
					"name": "Create a User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Auth-token",
								"value": "{{X-Auth-token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user\": {\n    \"username\": \"alice\",\n    \"email\": \"alice@test.com\",\n    \"password\": \"test\"\n  }\n}"
						},
						"url": {
							"raw": "http://{{keyrock}}/v1/users",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Read info about a User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Auth-token",
								"value": "{{X-Auth-token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{keyrock}}/v1/users/{{user-id}}",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"users",
								"{{user-id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Auth-token",
								"value": "{{X-Auth-token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{keyrock}}/v1/users",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update a User",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "{{Content-Type}}"
							},
							{
								"key": "X-Auth-token",
								"value": "{{X-Auth-token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"user\": {\n\t    \"username\": \"alice\",\n\t    \"email\": \"alice@test.com\",\n\t    \"enabled\": true,\n\t    \"gravatar\": false,\n\t    \"date_password\": \"2018-07-26T15:25:14.000Z\",\n\t    \"description\": \"Alice works for FIWARE\",\n\t    \"website\": \"http://www.fiware.org\"\n\t}\n}"
						},
						"url": {
							"raw": "http://{{keyrock}}/v1/users/{{user-id}}",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"users",
								"{{user-id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete a User",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Auth-token",
								"value": "{{X-Auth-token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{keyrock}}/v1/users/{{user-id}}",
							"protocol": "http",
							"host": [
								"{{keyrock}}"
							],
							"path": [
								"v1",
								"users",
								"{{user-id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Grouping Accounts under Organizations",
			"description": "",
			"item": [
				{
					"name": "Organization CRUD Actions",
					"description": "",
					"item": [
						{
							"name": "Create an Organization",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "{{Content-Type}}"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"organization\": {\n    \"name\": \"Security\",\n    \"description\": \"This group is for the store detectives\"\n  }\n}"
								},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations"
									]
								}
							},
							"response": []
						},
						{
							"name": "List Organizations",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Read info about an Organization",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update an Organization",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "{{Content-Type}}"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"organization\": {\n        \"name\": \"FIWARE Security\",\n        \"description\": \"The FIWARE Foundation is the legal independent body promoting, augmenting open-source FIWARE technologies\",\n        \"website\": \"http://fiware.org\"\n    }\n}"
								},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete an Organization",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Users within an Organization",
					"description": "",
					"item": [
						{
							"name": "Add a User as a Member of an Organization",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}/users/{{user-id}}/organization_roles/member",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}",
										"users",
										"{{user-id}}",
										"organization_roles",
										"member"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add a User as an Owner of an Organization",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}/users/{{user-id}}/organization_roles/owner",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}",
										"users",
										"{{user-id}}",
										"organization_roles",
										"owner"
									]
								}
							},
							"response": []
						},
						{
							"name": "List Users within an organization",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}/users",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Info of user organization relationship",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}/users/{{user-id}}/organization_roles",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}",
										"users",
										"{{user-id}}",
										"organization_roles"
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove User from an Organization",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "X-Auth-token",
										"value": "{{X-Auth-token}}"
									}
								],
								"body": {},
								"url": {
									"raw": "http://{{keyrock}}/v1/organizations/{{organization-id}}/users/{{user-id}}/organization_roles/member",
									"protocol": "http",
									"host": [
										"{{keyrock}}"
									],
									"path": [
										"v1",
										"organizations",
										"{{organization-id}}",
										"users",
										"{{user-id}}",
										"organization_roles",
										"member"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "f32d4f4e-6a77-4b0a-9cd1-7fdc58c14247",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "453a7383-bb2a-4e01-8ed4-7355fb12520f",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "d1f6f17c-5f2f-4256-af65-c2cdab18c208",
			"key": "keyrock",
			"value": "localhost:3005",
			"type": "string",
			"description": ""
		},
		{
			"id": "78357052-9d66-4597-ade5-556e9431645b",
			"key": "X-Auth-token",
			"value": "16c910e9-313d-46cc-ba9f-de1bea1fc513",
			"type": "string",
			"description": ""
		},
		{
			"id": "28434752-3ddc-4fab-be9f-604cf2bb3d42",
			"key": "X-Subject-token",
			"value": "16c910e9-313d-46cc-ba9f-de1bea1fc513",
			"type": "string",
			"description": ""
		},
		{
			"id": "06e94f93-ca4e-4cc0-ae9c-dd30f7f17e2f",
			"key": "organization-id",
			"value": "18deea43-e12a-4018-a45a-664c3158780d",
			"type": "string",
			"description": ""
		},
		{
			"id": "524ba241-27af-43d1-b5be-0002a97734a1",
			"key": "user-id",
			"value": "5e482345-2c48-410e-ae03-203d67a43cea",
			"type": "string",
			"description": ""
		}
	]
}